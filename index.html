<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title data-i18n="title">Дыхание Вима Хофа</title>
    <link rel="stylesheet" href="app.css">
    <link rel="icon" href="data:,">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="app-container">
        <div class="ambient-bg">
            <div class="ambient-orb orb-1"></div>
            <div class="ambient-orb orb-2"></div>
            <div class="ambient-orb orb-3"></div>
            <div class="ambient-particles">
                <div class="ambient-particle"></div>
                <div class="ambient-particle"></div>
                <div class="ambient-particle"></div>
                <div class="ambient-particle"></div>
                <div class="ambient-particle"></div>
                <div class="ambient-particle"></div>
                <div class="ambient-particle"></div>
                <div class="ambient-particle"></div>
                <div class="ambient-particle"></div>
                <div class="ambient-particle"></div>
            </div>
        </div>

        <div class="bottom-controls">
            <button id="pauseButton" class="control-btn pause-button">
                <svg class="control-icon pause-icon" viewBox="0 0 24 24" fill="currentColor">
                    <rect x="6" y="4" width="4" height="16" rx="1"/>
                    <rect x="14" y="4" width="4" height="16" rx="1"/>
                </svg>
            </button>
            <label class="control-btn sound-btn">
                <input type="checkbox" id="soundToggle">
                <svg class="control-icon sound-icon sound-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 5L6 9H2v6h4l5 4V5z"/>
                    <line x1="23" y1="9" x2="17" y2="15"/>
                    <line x1="17" y1="9" x2="23" y2="15"/>
                </svg>
                <svg class="control-icon sound-icon sound-on" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 5L6 9H2v6h4l5 4V5z"/>
                    <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
                </svg>
            </label>
        </div>

        <div id="homeScreen" class="screen active">
            <div class="home-content">
                <div class="logo-container">
                    <div class="logo-ring"></div>
                    <div class="logo-icon">
                        <svg viewBox="0 0 100 100" fill="none">
                            <circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="2" opacity="0.3"/>
                            <path d="M50 20 C30 35, 30 65, 50 80 C70 65, 70 35, 50 20" fill="currentColor" opacity="0.6"/>
                        </svg>
                    </div>
                </div>
                
                <h1 class="title" data-i18n="title">Дыхание Вима Хофа</h1>
                <p class="description" data-i18n="description">
                    Испытайте силу контролируемого дыхания по методу Вима Хофа
                </p>

                <div class="toggles-container">
                    <div class="toggle-item">
                        <span class="toggle-label" data-i18n="darkMode">Темная тема</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="themeToggle">
                            <span class="toggle-track"></span>
                        </label>
                    </div>
                    <div class="toggle-item">
                        <span class="toggle-label">RU / EN</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="langToggle">
                            <span class="toggle-track"></span>
                        </label>
                    </div>
                </div>

                <div class="button-group">
                    <button id="startButton" class="btn btn-primary" data-i18n="start">
                        <span class="btn-text">Начать</span>
                        <span class="btn-shine"></span>
                    </button>
                    <button id="settingsButton" class="btn btn-ghost" data-i18n="settings">Настройки</button>
                </div>
            </div>
        </div>

        <div id="exerciseScreen" class="screen">
            <div id="nextRoundMessage" class="next-round-message" data-i18n="nextRound">Начало следующего раунда...</div>
            
            <div class="breathing-circle" id="breathingCircle">
                <div class="circle-glow"></div>
                <div class="breath-particles" id="breathParticles"></div>
                <svg class="progress-ring" viewBox="0 0 280 280">
                    <defs>
                        <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:var(--accent-start)"/>
                            <stop offset="100%" style="stop-color:var(--accent-end)"/>
                        </linearGradient>
                    </defs>
                    <circle class="progress-ring__background" r="130" cx="140" cy="140"/>
                    <circle class="progress-ring__circle" r="130" cx="140" cy="140"/>
                </svg>
                <div class="circle-content">
                    <div id="round" class="round-text"></div>
                    <div id="phase" class="phase-text" data-i18n="getReady">Приготовьтесь</div>
                    <div id="counter" class="counter">5</div>
                </div>
                <div class="water-wave"></div>
            </div>

            <div id="breathingTip" class="breathing-tip"></div>

            <div class="exercise-buttons">
                <button id="breatheInButton" class="btn btn-small breathe-in-button" data-i18n="breatheIn">
                    <span class="btn-text">Сделать вдох</span>
                </button>
            </div>
        </div>

        <div id="completionScreen" class="screen">
            <div class="completion-content">
                <div class="success-icon">
                    <svg viewBox="0 0 100 100" fill="none">
                        <circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="3" class="success-circle"/>
                        <path d="M30 50 L45 65 L70 35" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" class="success-check"/>
                    </svg>
                </div>
                <h2 class="completion-title" data-i18n="complete">Практика завершена!</h2>
                <div class="results-card">
                    <p id="results" class="results-text"></p>
                </div>
                <div class="button-group">
                    <a id="shareButton" href="#" target="_blank" class="btn btn-primary" data-i18n="share">
                        <span class="btn-text">Поделиться</span>
                    </a>
                    <button id="restartButton" class="btn btn-secondary" data-i18n="restart">Повторить</button>
                    <a href="https://t.me/+80634XXusWo1OTcy" target="_blank" class="btn btn-ghost" data-i18n="joinGroup">Вступить в группу</a>
                </div>
            </div>
        </div>

        <div class="modal-overlay"></div>
        <div class="settings-modal">
            <div class="settings-close" id="closeSettings"></div>
            
            <div class="settings-content">
                <h2 class="modal-title" data-i18n="settings">Настройки</h2>
                
                <div class="settings-section">
                    <h3 class="section-title" data-i18n="exerciseSettings">Параметры упражнения</h3>
                    
                    <div class="setting-item">
                        <div class="setting-header">
                            <span data-i18n="roundsCount">Количество раундов</span>
                            <span id="roundsValue" class="setting-value">3</span>
                        </div>
                        <input type="range" id="rounds" min="1" max="10" value="3" class="range-slider">
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-header">
                            <span data-i18n="holdTime">Время задержки (сек)</span>
                            <span id="holdTimeValue" class="setting-value">90</span>
                        </div>
                        <input type="range" id="holdTime" min="10" max="120" value="90" class="range-slider">
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-header">
                            <span data-i18n="breathDuration">Длительность вдоха</span>
                            <span id="breathDurationValue" class="setting-value">2</span>
                        </div>
                        <input type="range" id="breathDuration" min="1" max="2.5" step="0.5" value="2" class="range-slider">
                    </div>
                </div>

                <div class="settings-section">
                    <h3 class="section-title" data-i18n="community">Сообщество</h3>
                    
                    <a href="https://t.me/icecode_wh" target="_blank" class="info-card telegram-card">
                        <div class="info-card-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"/>
                            </svg>
                        </div>
                        <div class="info-card-content">
                            <div class="info-card-title">ICE CODE | Метод Вима Хоффа</div>
                            <div class="info-card-description" data-i18n="channelDescription">Рассказываем, как дыхание меняет химию крови, отключает стресс и включает «режим берсерка»</div>
                        </div>
                        <div class="info-card-arrow">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </div>
                    </a>
                </div>

                <div class="settings-section">
                    <h3 class="section-title" data-i18n="developer">Разработчик</h3>
                    
                    <a href="https://kwork.ru/user/nikita-belousow" target="_blank" class="info-card developer-card">
                        <div class="info-card-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </div>
                        <div class="info-card-content">
                            <div class="info-card-title">Nikita Belousov</div>
                            <div class="info-card-description" data-i18n="developerDescription">Разработчик этого приложения</div>
                        </div>
                        <div class="info-card-arrow">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </div>
                    </a>
                </div>

                <div class="button-group">
                    <button id="saveSettings" class="btn btn-primary" data-i18n="save">
                        <span class="btn-text">Сохранить</span>
                    </button>
                </div>
            </div>
        </div>

        <audio id="countdownSound" src="sounds/countdown.MP3" preload="none"></audio>
        <audio id="backgroundBreathing" src="sounds/background_breathing.MP3" loop preload="none"></audio>
        <audio id="backgroundHold" src="sounds/background_hold.MP3" loop preload="none"></audio>
        <audio id="inhaleSound" src="sounds/inhale.MP3" preload="none"></audio>
        <audio id="exhaleSound" src="sounds/exhale.MP3" preload="none"></audio>
    </div>
    <script src="app.js"></script>
</body>
</html>
